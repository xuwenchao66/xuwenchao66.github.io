(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{401:function(e,t,r){e.exports=r.p+"assets/img/plugins-entry.dfa82e46.png"},402:function(e,t,r){e.exports=r.p+"assets/img/plugin-server.2d18990c.png"},403:function(e,t,r){e.exports=r.p+"assets/img/server-example.7dd8e2a3.png"},496:function(e,t,r){"use strict";r.r(t);var v=r(31),s=Object(v.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"whistle-插件开发入门-实践"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#whistle-插件开发入门-实践"}},[e._v("#")]),e._v(" whistle 插件开发入门 & 实践")]),e._v(" "),v("h2",{attrs:{id:"什么是-whistle"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#什么是-whistle"}},[e._v("#")]),e._v(" 什么是 whistle")]),e._v(" "),v("p",[v("a",{attrs:{href:"http://wproxy.org/whistle/",target:"_blank",rel:"noopener noreferrer"}},[e._v("whistle"),v("OutboundLink")],1),e._v(" 是基于 "),v("code",[e._v("Node.js")]),e._v(" 实现的跨平台 "),v("code",[e._v("web")]),e._v(" 调试代理工具，类似 "),v("code",[e._v("Charles")]),e._v("、"),v("code",[e._v("Fiddler")]),e._v(" 等。")]),e._v(" "),v("p",[e._v("常用的功能有查看、修改网络请求、响应。")]),e._v(" "),v("p",[e._v("在阅读下文之前最好对 "),v("a",{attrs:{href:"http://wproxy.org/whistle/",target:"_blank",rel:"noopener noreferrer"}},[e._v("whistle"),v("OutboundLink")],1),e._v(" 有一个基础的使用经验。")]),e._v(" "),v("h2",{attrs:{id:"whistle-插件简介"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#whistle-插件简介"}},[e._v("#")]),e._v(" whistle 插件简介")]),e._v(" "),v("h3",{attrs:{id:"什么是插件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#什么是插件"}},[e._v("#")]),e._v(" 什么是插件")]),e._v(" "),v("p",[v("code",[e._v("whistle")]),e._v(" 提供了强大的插件扩展能力，一个插件就是一个 "),v("code",[e._v("npm")]),e._v(" 包，也就是 "),v("code",[e._v("Node.js")]),e._v(" 模块。")]),e._v(" "),v("p",[e._v("通过插件可以实现以下等功能。")]),e._v(" "),v("ol",[v("li",[e._v("作为 "),v("code",[e._v("web")]),e._v(" 服务。")]),e._v(" "),v("li",[e._v("作为请求 "),v("code",[e._v("server")]),e._v("（直接响应或转发并修改请求响应）。")]),e._v(" "),v("li",[e._v("扩展 "),v("code",[e._v("network")]),e._v(" 右键菜单。")]),e._v(" "),v("li",[e._v("在 "),v("code",[e._v("network")]),e._v(" / "),v("code",[e._v("inspectors")]),e._v(" 自定义 "),v("code",[e._v("tab")]),e._v("。")])]),e._v(" "),v("h3",{attrs:{id:"如何使用插件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#如何使用插件"}},[e._v("#")]),e._v(" 如何使用插件")]),e._v(" "),v("p",[e._v("比如现在有一个叫做 "),v("code",[e._v("whistle.modify")]),e._v(" 的插件。")]),e._v(" "),v("h4",{attrs:{id:"安装插件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#安装插件"}},[e._v("#")]),e._v(" 安装插件")]),e._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" i -g whistle.modify\n")])])]),v("h4",{attrs:{id:"查看-使用插件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#查看-使用插件"}},[e._v("#")]),e._v(" 查看 & 使用插件")]),e._v(" "),v("p",[e._v("安装成功之后，可以在 "),v("code",[e._v("whistle")]),e._v(" 的插件管理页面中查看已经安装的插件。")]),e._v(" "),v("p",[v("img",{attrs:{src:r(401),alt:"plugins-entry"}})]),e._v(" "),v("h2",{attrs:{id:"whistle-插件基本原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#whistle-插件基本原理"}},[e._v("#")]),e._v(" whistle 插件基本原理")]),e._v(" "),v("p",[v("code",[e._v("whistle")]),e._v(" 是基于 "),v("code",[e._v("Node.js")]),e._v(" 实现的，然而 "),v("code",[e._v("whistle")]),e._v(" 插件是一个独立的进程，这样保证了插件不会影响到 "),v("code",[e._v("whistle")]),e._v(" 主进程的稳定性。")]),e._v(" "),v("p",[v("code",[e._v("whistle")]),e._v(" 插件会暴露一系列的 "),v("code",[e._v("http server")]),e._v(" 来实现与 "),v("code",[e._v("whistle")]),e._v(" 的交互。")]),e._v(" "),v("p",[v("img",{attrs:{src:r(402),alt:"plugins-entry"}})]),e._v(" "),v("p",[e._v("从上面图可知，"),v("code",[e._v("whistle")]),e._v(" 插件可以通过以上的 "),v("code",[e._v("server")]),e._v("，从而实现相关的功能，所以一个插件的基本模板可大致如下图。")]),e._v(" "),v("p",[v("img",{attrs:{src:r(403),alt:"server-example"}})]),e._v(" "),v("p",[e._v("这里这简单介绍与下文即将实现的插件相关的 "),v("code",[e._v("server")]),e._v("。")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("server")]),e._v("："),v("code",[e._v("whistle")]),e._v(" 会把指定请求转发到该 "),v("code",[e._v("server")]),e._v("。（通过实现该 "),v("code",[e._v("server")]),e._v(" 可以对请求响应进行修改等。）")]),e._v(" "),v("li",[v("code",[e._v("uiServer")]),e._v("：可作为静态服务为插件提供 "),v("code",[e._v("UI")]),e._v(" 界面以及 "),v("code",[e._v("API")]),e._v(" 等。")])]),e._v(" "),v("p",[e._v("关于 "),v("code",[e._v("server")]),e._v(" 的更多介绍可查看 "),v("a",{attrs:{href:"http://wproxy.org/whistle/plugins.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("whistle 插件开发"),v("OutboundLink")],1),e._v("。")]),e._v(" "),v("h2",{attrs:{id:"whistle-插件开发"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#whistle-插件开发"}},[e._v("#")]),e._v(" whistle 插件开发")]),e._v(" "),v("p",[e._v("下面将实现一个用于修改请求响应的 "),v("code",[e._v("whistle")]),e._v(" 插件，详情可查看 "),v("a",{attrs:{href:"https://www.npmjs.com/package/whistle.modify",target:"_blank",rel:"noopener noreferrer"}},[e._v("whistle.modify"),v("OutboundLink")],1),e._v("。")]),e._v(" "),v("h3",{attrs:{id:"插件功能分析"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#插件功能分析"}},[e._v("#")]),e._v(" 插件功能分析")]),e._v(" "),v("ol",[v("li",[e._v("首先是 "),v("code",[e._v("Rule")]),e._v(" 的增删改查，"),v("code",[e._v("Rule")]),e._v(" 用于描述是如何匹配请求，匹配之后该如何修改这个请求的响应等。")]),e._v(" "),v("li",[e._v("当 "),v("code",[e._v("Rule")]),e._v(" 变多之后，会变得难以查找，为此增加了 "),v("code",[e._v("Group")]),e._v("，用于分类管理 "),v("code",[e._v("Rule")]),e._v("。一个 "),v("code",[e._v("Group")]),e._v(" 相当于一个文件夹，里面包含了多个 "),v("code",[e._v("Rule")]),e._v("。\n为此这里还有 "),v("code",[e._v("Group")]),e._v(" 的增删改查。")])]),e._v(" "),v("h3",{attrs:{id:"技术实现任务拆解"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#技术实现任务拆解"}},[e._v("#")]),e._v(" 技术实现任务拆解")]),e._v(" "),v("h2",{attrs:{id:"whistle-插件还能做什么"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#whistle-插件还能做什么"}},[e._v("#")]),e._v(" whistle 插件还能做什么")]),e._v(" "),v("ol",[v("li",[e._v("简化、统一开发团队的环境切换")]),e._v(" "),v("li",[e._v("请求数据解密")])]),e._v(" "),v("h2",{attrs:{id:"参考"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),v("ol",[v("li",[v("a",{attrs:{href:"http://wproxy.org/whistle/",target:"_blank",rel:"noopener noreferrer"}},[e._v("whistle"),v("OutboundLink")],1)]),e._v(" "),v("li",[v("a",{attrs:{href:"http://wproxy.org/whistle/plugins.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("whistle 插件开发"),v("OutboundLink")],1)]),e._v(" "),v("li",[v("a",{attrs:{href:"https://github.com/whistle-plugins/examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("whistle-plugins examples"),v("OutboundLink")],1)]),e._v(" "),v("li",[v("a",{attrs:{href:"https://github.com/avwo/lack",target:"_blank",rel:"noopener noreferrer"}},[e._v("lack - 生成 whistle 插件的脚手架"),v("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=s.exports}}]);